(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{10308:(e,t,r)=>{"use strict";r.d(t,{J:()=>n});var a=r(12115),s=r(56166);function n(){let e=a.useContext(s.Rs);if(!e)throw Error("useUser must be used within a UserProvider");return e}},12412:(e,t,r)=>{Promise.resolve().then(r.bind(r,76372))},41130:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(30338),s=r(24274),n=r(91708);let o=JSON.parse('{"Username":"用户名","Password":"密码","Sign in":"登录","Old password":"旧密码","Auth":"认证","Confirm password":"确认密码","New password":"新密码","Password mismatch.":"密码不匹配","Incorrect password.":"密码错误","Incorrect username or password.":"用户名或密码错误","Too many login attempts, please try again later.":"登录尝试次数过多，请稍后再试。","New password must be different from old password.":"新密码必须与旧密码不同","Password updated successfully.":"密码更新成功","Old password is required.":"旧密码是必需的","New password is required.":"新密码是必需的","Confirm password is required.":"确认密码是必需的","Username is required.":"用户名是必需的","Password is required.":"密码是必需的","Sign in smartdns dashboard.":"登录 smartdns 仪表盘","Dashboard":"仪表盘","Hourly Query Count":"每小时查询次数","Query Count":"查询次数","Daily Query Count":"每日查询次数","Domain":"域名","Type":"类型","Client":"客户端","Time":"时间","Ping":"Ping","Group":"组","Query Time":"查询时间","Reply Code":"回应码","Is Blocked":"是否阻止","Pause":"暂停","Resume":"恢复","Clear":"清空","Clear Cache":"清除缓存","Clear Cache Success":"清除缓存成功","Clear Cache Failed":"清除缓存失败","Copy":"复制","Query":"查询","Delete":"删除","Debug":"调试","Info":"信息","Notice":"通知","Warning":"警告","Warn":"警告","Error":"错误","Fatal":"致命","Run Log":"运行日志","Audit Log":"审计日志","Overview":"概览","Total Query Count":"总查询次数","Blocked Query Count":"被阻止的查询次数","Cache Hit Rate":"缓存命中率","Cache Number":"缓存数量","Query Per Second":"每秒查询次数","Average Query Time":"平均查询时间","Top Clients":"最多查询客户端","Top Domains":"最多查询域名","Organization":"组织","Refresh Data":"刷新数据","Count":"次数","Query Log":"查询日志","Log":"日志","Terminal":"终端","Settings":"设置","Update":"更新","Language":"语言","Home":"首页","Official Site":"官方网站","Source":"源代码","Issues":"问题列表","About":"关于","SELECT ALL":"全选","Sign out":"登出","Copyright":"版权所有","unexpected socket close\\n":"意外的套接字关闭\\n","Connecting to {{logtype}} stream....\\n":"连接到{{logtype}}流....\\n","Connected to {{logtype}} stream.\\n":"已连接到{{logtype}}流。\\n","Disconnected from {{logtype}} stream.\\n":"已断开与{{logtype}}流的连接。\\n","Connecting to xterm server...\\r\\n":"连接到 xterm 服务器...\\r\\n","Connection closed.\\r\\n":"连接已关闭。\\r\\n","Nick Peng. All rights reserved.":"Nick Peng，保留所有权利。","Failed to fetch":"获取失败","Internal Server Error":"内部服务器错误","No data returned.":"没有返回数据。","Not found":"未找到","Cannot find whois.":"找不到 whois。","Whois data not available":"Whois 数据不可用","Registrar":"注册商","Country":"国家","Delete query log {{id}} {{domain}} successfully.":"删除查询日志 {{id}} {{domain}} 成功。","Error: Connection Closed, Reconnecting...":"错误：连接已关闭，正在重新连接...","Upstream Servers":"上游服务器","Server":"服务器","Host":"主机","Port":"端口","Success Rate":"成功率","Status":"状态","Unknown":"未知","Normal":"正常","Abnormal":"异常","Security":"安全性","Insecure":"不安全","Secure":"安全","Verify Failed":"验证失败","Not Applicable":"不适用","Avg Time":"平均时间","Total Success Number":"总成功次数","Clients":"客户端","Client IP":"客户端 IP","ID":"ID","Mac Address":"MAC 地址","Host Name":"主机名","Last Query Time":"最后查询时间","Error loading data":"加载数据时出错","Not implemented yet.":"尚未实现。","Delete client {{id}} {{client_ip}} successfully.":"删除客户端 {{id}} {{client_ip}} 成功。","Server request processing has been suspended, please check whether there is enough disk space.":"服务器请求处理已暂停，请检查是否有足够的磁盘空间。","Audit log is not enabled, please set `audit-enable` to `yes` in smartdns config file.":"审计日志未启用，请在smartdns配置文件中将 `audit-enable` 设置为 `yes`。","QPS":"查询数","UI Version":"UI 版本","Server Version":"服务器版本"}');a.Ay.use(n.A).use(s.r9).init({resources:{"zh-CN":{translation:o}},debug:!1,fallbackLng:"en",keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1}});let i=a.Ay},76372:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var a=r(95155),s=r(12115),n=r(85483),o=r(45365),i=r(37665),l=r(33567),u=r(78470),c=r(41983),d=r(29767),g=r(76530),m=r(8106),h=r(10308),p=r(24274),y=r(266),S=r(36274),C=r(41130),b=r(71991);function f(){var e,t,r;let{t:n}=(0,p.Bd)(),[o,d]=(0,s.useState)([]),[b,f]=(0,s.useState)(!1),[v,w]=(0,s.useState)(!1),A="upstream-servers-table-column-visibility",N="upstream-servers-table-column-sizing",z=localStorage.getItem(A),P=localStorage.getItem(N),T={},k={};try{z&&(T=JSON.parse(z))}catch(e){localStorage.removeItem(A),T={}}try{P&&(k=JSON.parse(P))}catch(e){localStorage.removeItem(N),k={}}let x=T||{},[I,E]=s.useState(x),[D,_]=s.useState(k),R=(0,s.useMemo)(()=>[{accessorKey:"host",header:n("Host"),size:250,enableSorting:!1},{accessorKey:"ip",header:n("IP"),enableSorting:!1,size:330},{accessorKey:"port",header:n("Port"),size:80,enableSorting:!1},{accessorKey:"server_type",header:n("Type"),size:100},{accessorKey:"security",header:n("Security"),size:148},{accessorKey:"status",header:n("Status"),size:110},{accessorKey:"query_success_rate",header:n("Success Rate"),enableSorting:!0,size:160,Cell:e=>{let{cell:t}=e,r=t.getValue();return(0,a.jsxs)("span",{children:[r," %"]})}},{accessorKey:"avg_time",header:n("Avg Time"),enableSorting:!0,size:140,Cell:e=>{let{cell:t}=e,r=t.getValue();return r<0?(0,a.jsx)("span",{children:"N/A"}):(0,a.jsxs)("span",{children:[r," ms"]})}},{accessorKey:"total_query_count",header:n("Total Query Count"),enableSorting:!0,size:200},{accessorKey:"total_query_success",header:n("Total Success Number"),enableSorting:!0,size:220}],[n]),{checkSessionError:O}=(0,h.J)(),[q,Q]=(0,s.useState)(""),[j,L]=(0,s.useState)(y.q),U=s.useRef(!1);window.innerWidth>=1200&&(U.current=!0);let K=s.useCallback(async()=>{w(!0);let e=await m.Y.GetUpstreamServers();if(e.error){await (null==O?void 0:O(e.error)),Q(m.Y.getErrorMessage(e.error)),f(!0),w(!1);return}if(null===e.data||void 0===e.data){f(!0),Q(n("No data returned.")),w(!1);return}d(e.data.map(e=>({...e,security:n(e.security),status:n(e.status)}))),f(!1),w(!1)},[O,n]);s.useEffect(()=>{K().catch(e=>{})},[K]),s.useEffect(()=>{null!==C.A.language&&void 0!==C.A.language&&("zh-CN"===C.A.language?L(S.q):L(y.q))},[]);let F=(0,l.A)(),V=getComputedStyle(document.documentElement),B=/--[^)]+/.exec(null!=(r=null==(t=F.palette)||null==(e=t.background)?void 0:e.paper)?r:""),H=B?B[0]:"",J=V.getPropertyValue(null!=H?H:"").trim(),M=(0,i.Up)({columns:R,data:o,localization:j,enableColumnResizing:!0,enableColumnOrdering:!1,enableColumnActions:!1,enableColumnFilters:!1,enableSorting:!0,enableClickToCopy:window.isSecureContext,enableGlobalFilter:!0,enableColumnFilterModes:!1,enableColumnPinning:!0,enableColumnDragging:!1,enableKeyboardShortcuts:!1,enablePagination:!1,enableGlobalFilterRankedResults:!1,muiToolbarAlertBannerProps:q.length>0?{color:"error",children:q}:void 0,renderTopToolbarCustomActions:()=>(0,a.jsx)(u.A,{arrow:!0,title:n("Refresh Data"),children:(0,a.jsx)(c.A,{onClick:async()=>K(),children:(0,a.jsx)(g.A,{})})}),onColumnVisibilityChange:e=>{let t="function"==typeof e?e(I):e;E(t),localStorage.setItem(A,JSON.stringify(t))},onColumnSizingChange:e=>{let t="function"==typeof e?e(D):e;_(t),localStorage.setItem(N,JSON.stringify(t))},initialState:{showGlobalFilter:!0,columnVisibility:I,columnSizing:D},state:{showAlertBanner:b,showProgressBars:v,showSkeletons:v,columnVisibility:I,columnSizing:D},mrtTheme:e=>({baseBackgroundColor:J})});return(0,a.jsx)(i.zp,{table:M})}function v(){let[e,t]=s.useState({vertical:"top",horizontal:"left"});return s.useEffect(()=>{let e=window.matchMedia("(max-width: 600px)"),r=e=>{e.matches?t({vertical:"top",horizontal:"left"}):t({vertical:"bottom",horizontal:"left"})};return e.matches?t({vertical:"top",horizontal:"left"}):t({vertical:"bottom",horizontal:"left"}),e.addEventListener("change",r),()=>{e.removeEventListener("change",r)}},[t]),(0,a.jsx)(b.n,{anchorOrigin:e,maxSnack:5,autoHideDuration:6e3,children:(0,a.jsx)(d.A,{children:(0,a.jsx)(f,{})})})}function w(){let{t:e}=(0,p.Bd)();return s.useEffect(()=>{document.title="".concat(e("Upstream Servers")," | ").concat(e("Dashboard")," | ").concat(o.$.site.name)},[e]),(0,a.jsx)(n.default,{spacing:2,children:(0,a.jsx)(v,{})})}}},e=>{e.O(0,[740,393,319,169,190,705,107,690,984,217,411,29,981,776,959,166,441,255,358],()=>e(e.s=12412)),_N_E=e.O()}]);