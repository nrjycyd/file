(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1],{4647:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(36697),n=r(95155);let a=(0,s.A)((0,n.jsx)("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16.01H3V4.99h18zM8 16h2.5l1.5 1.5 1.5-1.5H16v-2.5l1.5-1.5-1.5-1.5V8h-2.5L12 6.5 10.5 8H8v2.5L6.5 12 8 13.5zm4-7c1.66 0 3 1.34 3 3s-1.34 3-3 3z"}),"SettingsBrightnessOutlined")},10308:(e,t,r)=>{"use strict";r.d(t,{J:()=>a});var s=r(12115),n=r(56166);function a(){let e=s.useContext(n.Rs);if(!e)throw Error("useUser must be used within a UserProvider");return e}},15712:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var s=r(12115),n=r.t(s,2),a=r(89255),i=r(19868),o=r(9027);let l={...n}.useSyncExternalStore;function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{themeId:t}=e;return function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,o.A)();n&&t&&(n=n[t]||n);let u="undefined"!=typeof window&&void 0!==window.matchMedia,{defaultMatches:d=!1,matchMedia:c=u?window.matchMedia:null,ssrMatchMedia:h=null,noSsr:p=!1}=(0,i.A)({name:"MuiUseMediaQuery",props:r,theme:n}),g="function"==typeof e?e(n):e;return(g=g.replace(/^@media( ?)/m,"")).includes("print")&&console.warn("MUI: You have provided a `print` query to the `useMediaQuery` hook.\nUsing the print media query to modify print styles can lead to unexpected results.\nConsider using the `displayPrint` field in the `sx` prop instead.\nMore information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."),(void 0!==l?function(e,t,r,n,a){let i=s.useCallback(()=>t,[t]),o=s.useMemo(()=>{if(a&&r)return()=>r(e).matches;if(null!==n){let{matches:t}=n(e);return()=>t}return i},[i,e,n,a,r]),[u,d]=s.useMemo(()=>{if(null===r)return[i,()=>()=>{}];let t=r(e);return[()=>t.matches,e=>(t.addEventListener("change",e),()=>{t.removeEventListener("change",e)})]},[i,r,e]);return l(d,u,o)}:function(e,t,r,n,i){let[o,l]=s.useState(()=>i&&r?r(e).matches:n?n(e).matches:t);return(0,a.A)(()=>{if(!r)return;let t=r(e),s=()=>{l(t.matches)};return s(),t.addEventListener("change",s),()=>{t.removeEventListener("change",s)}},[e,r]),o})(g,d,c,h,p)}}u();let d=u({themeId:r(46892).A})},20063:(e,t,r)=>{"use strict";var s=r(47260);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},20660:(e,t,r)=>{"use strict";r.d(t,{f:()=>s});let s={home:"/",auth:{signIn:"/auth/sign-in"},dashboard:{dashboard:"/dashboard",queryLog:"/dashboard/query-log",upstreamServers:"/dashboard/upstream-servers",clients:"/dashboard/clients",settings:"/dashboard/settings",log:"/dashboard/log",term:"/dashboard/term"},errors:{notFound:"/errors/not-found"}}},23368:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var s=r(95155),n=r(12115),a=r(45365),i=r(20063),o=r(22003),l=r(20660),u=r(49900),d=r(10308);function c(e){let{children:t}=e,r=(0,i.useRouter)(),{user:a,error:c,isLoading:h}=(0,d.J)(),[p,g]=n.useState(!0),m=async()=>{if(!h){if(c)return void g(!1);if(a){u.v.debug("[GuestGuard]: User is logged in, redirecting to dashboard"),r.replace(l.f.dashboard.dashboard);return}g(!1)}};return(n.useEffect(()=>{m().catch(()=>{})},[a,c,h]),p)?null:c?(0,s.jsx)(o.A,{color:"error",children:c}):(0,s.jsx)(n.Fragment,{children:t})}var h=r(94049),p=r(85483),g=r(31265),m=r(82544);function y(e){let{children:t}=e;return(0,s.jsx)(h.default,{sx:{display:{xs:"flex"},flexDirection:"column",backgroundColor:"var(--mui-palette-background-paper)",minHeight:"100vh"},children:(0,s.jsxs)(h.default,{sx:{display:"flex",flex:"1 1 auto",flexDirection:"column"},children:[(0,s.jsx)(h.default,{sx:{display:"flex",justifyContent:"flex-end",p:2,zIndex:1,alignItems:"center"},children:(0,s.jsxs)(p.default,{direction:"row",spacing:2,children:[(0,s.jsx)(m.H,{size:"small"}),(0,s.jsx)(g.s,{})]})}),(0,s.jsx)(h.default,{sx:{alignItems:"center",transform:"translateY(-10%)",display:"flex",flex:"1 1 auto",justifyContent:"center",p:3},children:(0,s.jsx)(h.default,{sx:{maxWidth:"450px",width:"100%"},children:t})})]})})}var f=r(66942),x=r(70690),v=r(52641),A=r(18369),b=r(51221),j=r(47448),w=r(25635),C=r(24274),S=r(22544),k=r(41508),M=r(3596),P=r(67570),I=r(8106),N=r(14745),E=r(15526);let L=k.Ikc({username:k.YjP().min(1,{message:"Username is required."}),password:k.YjP().min(1,{message:"Password is required."})}),T={username:"",password:""};async function U(e){let t=await M.y.getUser();t.data&&e&&((null==e?void 0:e.enable_terminal)!=="true"&&t.data.sideNavVisibility.set("term",!1),M.y.saveUserSettings())}function R(){var e;let{t}=(0,C.Bd)(),r=(0,i.useRouter)(),{checkSession:a}=(0,d.J)(),[l,u]=n.useState(),[c,h]=n.useState(!1),{control:g,handleSubmit:m,setError:y,formState:{errors:k}}=(0,S.mN)({defaultValues:T,resolver:(0,f.u)(L)}),R=n.useCallback(async e=>{h(!0);let{error:s}=await M.y.signInWithPassword(e);if(s){y("root",{type:"server",message:t(I.Y.getErrorMessage(s))}),h(!1);return}await I.Y.GetSettings().then(async e=>{e.data&&await U(e.data),e.error&&(y("root",{type:"server",message:t(I.Y.getErrorMessage(e.error))}),h(!1))}).catch(e=>{}),await (null==a?void 0:a()),r.refresh()},[t,a,r,y]);return(0,s.jsxs)(p.default,{spacing:4,children:[(0,s.jsxs)(p.default,{direction:"row",spacing:1,alignItems:"center",children:[(0,s.jsx)(P.gu,{color:"light",height:80,width:80}),(0,s.jsxs)(p.default,{spacing:1,children:[(0,s.jsx)(w.default,{variant:"h4",children:t("Sign in")}),(0,s.jsx)(w.default,{color:"text.secondary",variant:"body2",children:t("Sign in smartdns dashboard.")})]})]}),(0,s.jsx)("form",{onSubmit:m(R),children:(0,s.jsxs)(p.default,{spacing:2,children:[(0,s.jsx)(S.xI,{control:g,name:"username",render:e=>{var r;let{field:n}=e;return(0,s.jsxs)(v.A,{error:!!k.username,children:[(0,s.jsx)(b.A,{children:t("Username")}),(0,s.jsx)(j.A,{...n,label:"Username",type:"username"}),k.username?(0,s.jsx)(A.A,{children:t(null!=(r=k.username.message)?r:"")}):null]})}}),(0,s.jsx)(S.xI,{control:g,name:"password",render:e=>{var r;let{field:n}=e;return(0,s.jsxs)(v.A,{error:!!k.password,children:[(0,s.jsx)(b.A,{children:t("Password")}),(0,s.jsx)(j.A,{...n,endAdornment:l?(0,s.jsx)(N.A,{cursor:"pointer",onClick:()=>{u(!1)}}):(0,s.jsx)(E.A,{cursor:"pointer",onClick:()=>{u(!0)}}),label:"Password",type:l?"text":"password"}),k.password?(0,s.jsx)(A.A,{children:t(null!=(r=k.password.message)?r:"")}):null]})}}),k.root?(0,s.jsx)(o.A,{severity:"error",children:t(null!=(e=k.root.message)?e:"")}):null,(0,s.jsx)(x.default,{disabled:c,type:"submit",variant:"contained",children:t("Sign in")})]})})]})}function D(){let{t:e}=(0,C.Bd)();return n.useEffect(()=>{document.title="".concat(e("Sign in")," | ").concat(e("Auth")," | ").concat(a.$.site.name)},[e]),(0,s.jsx)(y,{children:(0,s.jsx)(c,{children:(0,s.jsx)(R,{})})})}},25635:(e,t,r)=>{"use strict";r.d(t,{default:()=>x});var s=r(12115),n=r(2821),a=r(57001),i=r(11789),o=r(48116),l=r(66964),u=r(16625),d=r(81852),c=r(74798),h=r(42297),p=r(95155);let g={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},m=(0,i.Dg)(),y=(0,o.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],"inherit"!==r.align&&t["align".concat((0,d.A)(r.align))],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})((0,l.A)(e=>{var t;let{theme:r}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(r.typography).filter(e=>{let[t,r]=e;return"inherit"!==t&&r&&"object"==typeof r}).map(e=>{let[t,r]=e;return{props:{variant:t},style:r}}),...Object.entries(r.palette).filter((0,c.A)()).map(e=>{let[t]=e;return{props:{color:t},style:{color:(r.vars||r).palette[t].main}}}),...Object.entries((null==(t=r.palette)?void 0:t.text)||{}).filter(e=>{let[,t]=e;return"string"==typeof t}).map(e=>{let[t]=e;return{props:{color:"text".concat((0,d.A)(t))},style:{color:(r.vars||r).palette.text[t]}}}),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}})),f={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},x=s.forwardRef(function(e,t){let{color:r,...s}=(0,u.b)({props:e,name:"MuiTypography"}),i=!g[r],o=m({...s,...i&&{color:r}}),{align:l="inherit",className:c,component:x,gutterBottom:v=!1,noWrap:A=!1,paragraph:b=!1,variant:j="body1",variantMapping:w=f,...C}=o,S={...o,align:l,color:r,className:c,component:x,gutterBottom:v,noWrap:A,paragraph:b,variant:j,variantMapping:w},k=x||(b?"p":w[j]||f[j])||"span",M=(e=>{let{align:t,gutterBottom:r,noWrap:s,paragraph:n,variant:i,classes:o}=e,l={root:["root",i,"inherit"!==e.align&&"align".concat((0,d.A)(t)),r&&"gutterBottom",s&&"noWrap",n&&"paragraph"]};return(0,a.A)(l,h.y,o)})(S);return(0,p.jsx)(y,{as:k,ref:t,className:(0,n.A)(M.root,c),...C,ownerState:S,style:{..."inherit"!==l&&{"--Typography-textAlign":l},...C.style}})})},31265:(e,t,r)=>{"use strict";r.d(t,{s:()=>h});var s=r(95155),n=r(12115),a=r(41983),i=r(79010),o=r(39504),l=r(56798),u=r(4647),d=r(98521),c=r(15712);function h(){let{setColorScheme:e}=(0,i.Ut)(),t=(0,c.A)("(prefers-color-scheme: dark)"),[r,h]=n.useState("system"),p=n.useCallback(r=>{let s=r,n=r;"system"!==r&&"dark"!==r&&"light"!==r&&(n="system"),"system"===n&&(s=t?"dark":"light"),h(n),e(s)},[t,e]);return n.useEffect(()=>{let e=localStorage.getItem("user-color-scheme");p(null!=e?e:"system")},[t,e,p]),(0,s.jsx)(d.i,{children:(0,s.jsxs)(a.A,{sx:{ml:1},onClick:()=>{let e;e="system"===r?"dark":"dark"===r?"light":"system",localStorage.setItem("user-color-scheme",e),p(e)},children:["light"===r&&(0,s.jsx)(o.A,{}),"dark"===r&&(0,s.jsx)(l.A,{}),"system"===r&&(0,s.jsx)(u.A,{})]})})}},39017:(e,t,r)=>{Promise.resolve().then(r.bind(r,23368))},39504:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(36697),n=r(95155);let a=(0,s.A)((0,n.jsx)("path",{d:"M12 9c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3m0-2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z"}),"LightModeOutlined")},41130:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(30338),n=r(24274),a=r(91708);let i=JSON.parse('{"Username":"用户名","Password":"密码","Sign in":"登录","Old password":"旧密码","Auth":"认证","Confirm password":"确认密码","New password":"新密码","Password mismatch.":"密码不匹配","Incorrect password.":"密码错误","Incorrect username or password.":"用户名或密码错误","Too many login attempts, please try again later.":"登录尝试次数过多，请稍后再试。","New password must be different from old password.":"新密码必须与旧密码不同","Password updated successfully.":"密码更新成功","Old password is required.":"旧密码是必需的","New password is required.":"新密码是必需的","Confirm password is required.":"确认密码是必需的","Username is required.":"用户名是必需的","Password is required.":"密码是必需的","Sign in smartdns dashboard.":"登录 smartdns 仪表盘","Dashboard":"仪表盘","Hourly Query Count":"每小时查询次数","Query Count":"查询次数","Daily Query Count":"每日查询次数","Domain":"域名","Type":"类型","Client":"客户端","Time":"时间","Ping":"Ping","Group":"组","Query Time":"查询时间","Reply Code":"回应码","Is Blocked":"是否阻止","Pause":"暂停","Resume":"恢复","Clear":"清空","Clear Cache":"清除缓存","Clear Cache Success":"清除缓存成功","Clear Cache Failed":"清除缓存失败","Copy":"复制","Query":"查询","Delete":"删除","Debug":"调试","Info":"信息","Notice":"通知","Warning":"警告","Warn":"警告","Error":"错误","Fatal":"致命","Run Log":"运行日志","Audit Log":"审计日志","Overview":"概览","Total Query Count":"总查询次数","Blocked Query Count":"被阻止的查询次数","Cache Hit Rate":"缓存命中率","Cache Number":"缓存数量","Query Per Second":"每秒查询次数","Average Query Time":"平均查询时间","Top Clients":"最多查询客户端","Top Domains":"最多查询域名","Organization":"组织","Refresh Data":"刷新数据","Count":"次数","Query Log":"查询日志","Log":"日志","Terminal":"终端","Settings":"设置","Update":"更新","Language":"语言","Home":"首页","Official Site":"官方网站","Source":"源代码","Issues":"问题列表","About":"关于","SELECT ALL":"全选","Sign out":"登出","Copyright":"版权所有","unexpected socket close\\n":"意外的套接字关闭\\n","Connecting to {{logtype}} stream....\\n":"连接到{{logtype}}流....\\n","Connected to {{logtype}} stream.\\n":"已连接到{{logtype}}流。\\n","Disconnected from {{logtype}} stream.\\n":"已断开与{{logtype}}流的连接。\\n","Connecting to xterm server...\\r\\n":"连接到 xterm 服务器...\\r\\n","Connection closed.\\r\\n":"连接已关闭。\\r\\n","Nick Peng. All rights reserved.":"Nick Peng，保留所有权利。","Failed to fetch":"获取失败","Internal Server Error":"内部服务器错误","No data returned.":"没有返回数据。","Not found":"未找到","Cannot find whois.":"找不到 whois。","Whois data not available":"Whois 数据不可用","Registrar":"注册商","Country":"国家","Delete query log {{id}} {{domain}} successfully.":"删除查询日志 {{id}} {{domain}} 成功。","Error: Connection Closed, Reconnecting...":"错误：连接已关闭，正在重新连接...","Upstream Servers":"上游服务器","Server":"服务器","Host":"主机","Port":"端口","Success Rate":"成功率","Status":"状态","Unknown":"未知","Normal":"正常","Abnormal":"异常","Security":"安全性","Insecure":"不安全","Secure":"安全","Verify Failed":"验证失败","Not Applicable":"不适用","Avg Time":"平均时间","Total Success Number":"总成功次数","Clients":"客户端","Client IP":"客户端 IP","ID":"ID","Mac Address":"MAC 地址","Host Name":"主机名","Last Query Time":"最后查询时间","Error loading data":"加载数据时出错","Not implemented yet.":"尚未实现。","Delete client {{id}} {{client_ip}} successfully.":"删除客户端 {{id}} {{client_ip}} 成功。","Server request processing has been suspended, please check whether there is enough disk space.":"服务器请求处理已暂停，请检查是否有足够的磁盘空间。","Audit log is not enabled, please set `audit-enable` to `yes` in smartdns config file.":"审计日志未启用，请在smartdns配置文件中将 `audit-enable` 设置为 `yes`。","QPS":"查询数","UI Version":"UI 版本","Server Version":"服务器版本"}');s.Ay.use(a.A).use(n.r9).init({resources:{"zh-CN":{translation:i}},debug:!1,fallbackLng:"en",keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1}});let o=s.Ay},42297:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,y:()=>a});var s=r(85795),n=r(95195);function a(e){return(0,n.Ay)("MuiTypography",e)}let i=(0,s.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"])},56798:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(36697),n=r(95155);let a=(0,s.A)((0,n.jsx)("path",{d:"M9.37 5.51c-.18.64-.27 1.31-.27 1.99 0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27C17.45 17.19 14.93 19 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"}),"DarkModeOutlined")},67570:(e,t,r)=>{"use strict";r.d(t,{gu:()=>i,lN:()=>o});var s=r(95155);r(12115);var n=r(94049),a=r(98521);function i(e){let{color:t="dark",emblem:r,height:a=60,width:i=60}=e;return(0,s.jsx)(n.default,{alt:"logo",component:"img",height:a,src:"/assets/logo.svg",width:i})}function o(e){let{country:t,alt:r,height:i="auto",width:o="auto",title:l}=e;return(0,s.jsxs)(a.i,{children:[(0,s.jsx)(n.default,{alt:r,component:"img",height:i,src:"/assets/flags/".concat(t,".svg"),width:o,sx:{display:"inline-block",verticalAlign:"middle"}}),l?(0,s.jsx)("span",{style:{marginLeft:"8px"},children:l}):null]})}},82544:(e,t,r)=>{"use strict";r.d(t,{H:()=>c});var s=r(95155),n=r(44583),a=r(52641),i=r(55606),o=r(38887),l=r(12115),u=r(41130),d=r(67570);function c(e){let{sx:t,size:r}=e,[c,h]=l.useState(()=>{let e=u.A.language;return e.startsWith("en")?"en":e});return(0,s.jsx)(n.A,{children:(0,s.jsx)(a.A,{size:r,sx:{minWidth:140},children:(0,s.jsxs)(i.A,{onChange:e=>{u.A.changeLanguage(e.target.value).then(t=>{h(e.target.value)}).catch(e=>{})},value:c,sx:t,children:[(0,s.jsx)(o.A,{value:"en",children:(0,s.jsx)(d.lN,{country:"gb",height:"20px",title:"English"})}),(0,s.jsx)(o.A,{value:"zh-CN",children:(0,s.jsx)(d.lN,{country:"cn",height:"20px",title:"中文"})})]})})})}},98521:(e,t,r)=>{"use strict";r.d(t,{i:()=>i});var s=r(95155),n=r(12115),a=r(89255);function i(e){let{children:t,defer:r=!1,fallback:i=null}=e,[o,l]=n.useState(!1);return(0,a.A)(()=>{r||l(!0)},[r]),n.useEffect(()=>{r&&l(!0)},[r]),(0,s.jsx)(n.Fragment,{children:o?t:i})}}},e=>{e.O(0,[393,319,169,190,705,107,690,984,29,10,728,166,441,255,358],()=>e(e.s=39017)),_N_E=e.O()}]);